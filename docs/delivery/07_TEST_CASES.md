# 代表テストケース集

**実際の性能確認時の入出力パターン集**

---

## 📋 テスト実行方法

```bash
http://localhost:3000 → 商品選択 → 広告文入力 → チェック開始
```

---

## パターン1: ランキング表現（Issue #36）

### 入力
```
Amazon・楽天で1位を獲得した人気商品です。
```

### 出力
```
❌ 不適合

違反タイプ: 景表法違反
重大度: high
違反内容: ランキング・順位表現には調査機関・調査期間・調査対象を明記したエビデンスが必須
修正案: Amazon・楽天で1位※を獲得した人気商品です。
       ※2024年1月Amazon・楽天ランキング調査
```

---

## パターン2: 全額返金保証

### 入力
```
全額返金保証も付いて安心です
```

### 出力
```
❌ 不適合

違反タイプ: 景表法違反（保証表現）
重大度: high
違反内容: 保証表現には条件の明示が必須
修正案: 全額返金保証※も付いて安心です
       ※初回購入30日以内、詳細は商品ページ参照
```

---

## パターン3: 効果保証

### 入力
```
効果を保証します
```

### 出力
```
❌ 不適合

違反タイプ: 景表法違反（効果保証）
重大度: high
違反内容: 化粧品・医薬部外品で効果を保証することはできません
修正案: 効果を実感いただける自信があります
```

---

## パターン4: 医師関連表現

### 入力
```
"医師も教えない"汚い爪をキレイにする殺菌ジェル
```

### 出力
```
❌ 不適合（複合違反）

違反1: 薬機法違反（医師推奨想起）
- 「医師も教えない」は医療関係者推奨を暗示
- 修正案: 削除推奨

違反2: 薬機法違反（爪水虫想起）
- 「汚い爪」は爪水虫を想起させる
- 修正案: 「清潔な爪」に変更

違反3: 薬機法違反（殺菌表現）
- 「殺菌」は作用機序の注釈が必須
- 修正案: 殺菌※ジェル ※殺菌は消毒の作用機序として
```

---

## パターン5: クマ表現

### 入力
```
「ハリのある目の下でありたい！」「クマをスッキリさせたい」「できればどうにかしたい！」という方も多いかと思います。
```

### 出力
```
❌ 不適合

違反タイプ: 薬機法違反
重大度: medium
違反内容: 「クマ」単体は化粧品効能56項目外、注釈が必須
修正案: 目元のクマ※をスッキリさせたい
       ※乾燥や古い角質によるくすみ、ハリ不足
```

---

## パターン6: ギネス期間NG

### 入力
```
売上世界一※1　※1：ディープパッチシリーズとして売上世界一（TFCO株式会社のグローバル調査、美容用マイクロニードルスキンパッチにおける最大のブランド、2019年3月～2025年2月）
```

### 出力
```
❌ 不適合

違反タイプ: ギネス期間表記誤り
重大度: high
違反内容:
- 開始年: 2019年 → 正しくは2020年
- 終了年: 2025年 → 正しくは2024年
修正案: 2020年～2024年の5年間
```

---

## パターン7: ギネス期間OK

### 入力
```
ギネス世界記録™認定※1 売上世界一※1。※1：ディープパッチシリーズとして売上世界一（TFCO株式会社のグローバル調査、美容用マイクロニードルスキンパッチにおける最大のブランド、2020年～2024年の5年間）でギネス世界記録™認定
```

### 出力
```
✅ 適合

判定: 問題なし
理由: ギネス期間（2020年～2024年）が正しく記載されています
```

---

## パターン8: 浸透表現NG

### 入力
```
ヒアルロン酸が肌の奥深くまで浸透します。
```

### 出力
```
❌ 不適合

違反タイプ: 薬機法違反
重大度: high
違反内容: 「浸透」表現には「※角層まで」の注釈が必須
修正案: ヒアルロン酸が肌の奥深く※まで浸透します。※角層まで
```

---

## パターン9: 浸透表現OK

### 入力
```
ヒアルロン酸が角層※まで浸透します。※角層まで
```

### 出力
```
✅ 適合

判定: 問題なし
理由: 「※角層まで」の注釈が正しく記載されています
```

---

## パターン10: NO.1表現NG

### 入力
```
売上NO.1のヒアルロン酸パッチ
```

### 出力
```
❌ 不適合

違反タイプ: 景表法違反
重大度: high
違反内容: 「NO.1」表現には調査機関・期間・対象の明記が必須
修正案: 売上NO.1※のヒアルロン酸パッチ
       ※2024年1月 ○○社調べ、ヒアルロン酸パッチ市場
```

---

## パターン11: ステマ規制

### 入力
```
【SNS投稿風】このパッチすごくいい！友達にもオススメしたい♪
```

### 出力
```
❌ 不適合

違反タイプ: ステマ規制違反（景表法）
重大度: high
違反内容: 広告であることが明示されていません
修正案: 【PR】このパッチすごくいい！友達にもオススメしたい♪
```

---

## パターン12: 若返り表現

### 入力
```
肌が若返り、10歳若く見えます。
```

### 出力
```
❌ 不適合

違反タイプ: 薬機法違反
重大度: high
違反内容: 「若返り」は化粧品で訴求できない表現
修正案: 若々しい印象※の肌へ。※メーキャップ効果による
```

---

## パターン13: 体験談NG

### 入力
```
使って1週間でシワが消えました！（50代女性）
```

### 出力
```
❌ 不適合

違反タイプ: 薬機法違反（体験談）
重大度: high
違反内容: 効果を断定的に表現、「個人の感想です」注釈なし
修正案: 使って1週間で肌にハリを感じました※（50代女性）
       ※個人の感想です。効果を保証するものではありません。
```

---

## パターン14: 体験談OK

### 入力
```
使って1週間で肌にハリを感じました※（50代女性）※個人の感想です。効果を保証するものではありません。
```

### 出力
```
✅ 適合

判定: 問題なし
理由: 「個人の感想です」注釈が正しく記載されています
```

---

## パターン15: 殺菌表現（SH商品）

### 入力
```
爪をきれいにする殺菌ジェル。
```

### 出力
```
❌ 不適合

違反タイプ: 薬機法違反
重大度: high
違反内容: 「殺菌」は作用機序の注釈が必須
修正案: 爪をきれいにする殺菌※ジェル。※殺菌は消毒の作用機序として
```

---

## 📊 検証結果サマリー

| パターン | 入力 | 期待結果 | 実際の結果 |
|---------|------|---------|----------|
| 1. ランキング表現 | 「1位を獲得」 | ❌ NG | ✅ 正しく検出 |
| 2. 全額返金保証 | 「全額返金保証」 | ❌ NG | ✅ 正しく検出 |
| 3. 効果保証 | 「効果を保証」 | ❌ NG | ✅ 正しく検出 |
| 4. 医師表現 | 「医師も教えない」 | ❌ NG | ✅ 正しく検出 |
| 5. クマ表現 | 「クマをスッキリ」 | ❌ NG | ✅ 正しく検出 |
| 6. ギネス期間NG | 2019～2025年 | ❌ NG | ✅ 正しく検出 |
| 7. ギネス期間OK | 2020～2024年 | ✅ OK | ✅ 正しく判定 |
| 8. 浸透表現NG | 「奥深くまで」 | ❌ NG | ✅ 正しく検出 |
| 9. 浸透表現OK | 「角層まで※」 | ✅ OK | ✅ 正しく判定 |
| 10. NO.1表現 | 「NO.1」 | ❌ NG | ✅ 正しく検出 |
| 11. ステマ規制 | PR表記なし | ❌ NG | ✅ 正しく検出 |
| 12. 若返り表現 | 「若返り」 | ❌ NG | ✅ 正しく検出 |
| 13. 体験談NG | 注釈なし | ❌ NG | ✅ 正しく検出 |
| 14. 体験談OK | 注釈あり | ✅ OK | ✅ 正しく判定 |
| 15. 殺菌表現 | 注釈なし | ❌ NG | ✅ 正しく検出 |

**検証日**: 2025年10月30日
**検出精度**: 15/15 = 100%
**False Positive**: 0件
**False Negative**: 0件

---

## ⏱ レスポンス時間

| 処理 | 平均時間 | 目標 | 結果 |
|------|---------|------|------|
| セグメント分割 | 2.1秒 | 3秒以内 | ✅ 合格 |
| 10セグメント評価 | 24秒 | 30秒以内 | ✅ 合格 |
| レポート生成 | 0.3秒 | 1秒以内 | ✅ 合格 |

---

## トラブルシューティング

### テストが失敗する場合

```bash
# 1. Vector DB初期化確認
npm run setup:vector-db

# 2. ChromaDB起動確認
docker ps | grep chroma

# 3. 環境変数確認
npm run check-env
```

---

**バージョン**: v1.0
**最終更新**: 2025年10月30日
**テスト環境**: Gemini 2.5 Flash Lite、ChromaDB 3.0.17
